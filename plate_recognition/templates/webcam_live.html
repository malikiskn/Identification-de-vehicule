<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Webcam Live</title>
</head>
<body>
    <h2>üì° Surveillance en direct</h2>

    <!-- Vid√©o en direct -->
    <img src="{{ url_for('stream') }}" width="700">

    <!-- Plaques d√©tect√©es -->
    <h3>üìã Plaques d√©tect√©es en direct :</h3>
    <div id="plates">
        Chargement...
    </div>

    <br>
    <a href="/">‚¨ÖÔ∏è Retour</a>

    <script>
        // Rafra√Æchir les plaques toutes les 2s
        setInterval(() => {
            fetch('/get_live_plates')
                .then(res => res.json())
                .then(data => {
                    const div = document.getElementById('plates');
                    if (data.plates.length === 0) {
                        div.innerHTML = "<i>Aucune plaque d√©tect√©e</i>";
                    } else {
                        div.innerHTML = "<ul>" + data.plates.map(p => `<li>${p}</li>`).join("") + "</ul>";
                    }
                });
        }, 2000);
    </script>
</body>
</html>